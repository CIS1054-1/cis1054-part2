{% extends "layout.html" %}

{% block pageTitle %}
Book a Table
{% endblock %}

{% block navbar %}
{% include "navbar.html" with {'navbarData' : navbar_data} %}
{% endblock %}

{% block content %}
<main>
    <section class="top-bar">
        <img src="assets/img/dogmburger.png" />
        <div>
            <h1>Book a Table</h1>
        </div>
    </section>

    <div style="margin-top: 50px;"></div>

    <section class="white-bar">
        <form id="book-table-form" action="book_table.php" method="post">
            <input type="hidden" name="datetime" value="{{ app.request.get('datetime') }}">

            <div class="table-grid">
                {% for i in 1..10 %}
                    {% set isReserved = false %}
                    {% for reservation in reservations %}
                        {% if reservation.table_number == i %}
                            {% set isReserved = true %}
                        {% endif %}
                    {% endfor %}

                    <div class="table-circle {% if isReserved %}occupied{% else %}available{% endif %}" data-table="{{ i }}">
                        {{ i }}
                    </div>
                {% endfor %}
            </div>

            <div class="calendar-container">
                <input type="date" name="date" value="{{ app.request.get('datetime')|date('Y-m-d') }}">
                <input type="time" name="time" value="{{ app.request.get('datetime')|date('H:i') }}">
            </div>

            <button type="submit">Book Table</button>
        </form>
    </section>
</main>

<script type="text/javascript" src="assets/js/tableBooking.js"></script>
{% endblock %}